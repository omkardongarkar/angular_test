<div class="analytics-container">
  <!-- Filter Bar -->
  <section class="filter-bar">
    <div class="filter-left">
      <div class="badge">
        <span>{{ dateRange }}</span>
        <img
          src="https://cdn.builder.io/api/v1/image/assets/TEMP/56f4684ebdc720c103690290ce1f657357b66f0b82bad52908e6e9c6cd8904ee?placeholderIfAbsent=true&apiKey=43632c7bd1d84079a851d9b51a08f2e5"
          alt="Calendar icon"
          class="icon"
        />
      </div>
    </div>
    <div class="filter-right">
      <div class="period-selector">
        <button class="period-btn">Default</button>
        <button class="period-btn active">
          <img
            src="https://cdn.builder.io/api/v1/image/assets/TEMP/6d8410ca3c96f126978691031ad1095ca317ceaaf1db7597922a2e477c654d7c?placeholderIfAbsent=true&apiKey=43632c7bd1d84079a851d9b51a08f2e5"
            alt="Custom icon"
            class="icon"
          />
          <span>Custom</span>
        </button>
        <button class="period-btn">Today</button>
        <button class="period-btn">7D</button>
        <button class="period-btn">30D</button>
        <button class="period-btn">3M</button>
        <button class="period-btn">6M</button>
        <button class="period-btn">12M</button>
        <button class="period-btn">Q1</button>
        <button class="period-btn">Q2</button>
        <button class="period-btn">Q3</button>
        <button class="period-btn">Q4</button>
        <button class="period-btn icon-only">
          <img
            src="https://cdn.builder.io/api/v1/image/assets/TEMP/74f532243858701a5806dd9ff80ef0003a952573b1488f571f8d3b976819f2e3?placeholderIfAbsent=true&apiKey=43632c7bd1d84079a851d9b51a08f2e5"
            alt="More options"
            class="icon"
          />
        </button>
      </div>
      <button class="filter-btn">
        <img
          src="https://cdn.builder.io/api/v1/image/assets/TEMP/2885d00d72000796292818c346802bbc02c8488c48053573fe4f95febad037ed?placeholderIfAbsent=true&apiKey=43632c7bd1d84079a851d9b51a08f2e5"
          alt="Filter icon"
          class="icon"
        />
        <span>Filters</span>
      </button>
      <img
        src="https://cdn.builder.io/api/v1/image/assets/TEMP/5562650d7c826d8ea88bd8d1d0689ffd2411194dcb0d2bf8dac6a59ef0437ace?placeholderIfAbsent=true&apiKey=43632c7bd1d84079a851d9b51a08f2e5"
        alt="Settings"
        class="icon settings-icon"
      />
    </div>
  </section>

  <!-- Chart Section -->
  <section class="chart-section">
    <h2 class="chart-title">Conversation drop-off distribution by number of dialogue turns</h2>
    <div class="chart-container">
      <canvas #barChart></canvas>
    </div>
  </section>

  <!-- Table Section -->
  <section class="table-section">
    <div class="table-header">
      <div class="header-cell id-cell">Conversation ID</div>
      <div class="header-cell">Engagement Level</div>
      <div class="header-cell">
        <span>Topic <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevrons-up-down"><path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/></svg></span>
       
      </div>
      <div class="header-cell">
        <span>Dialog turns <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"/></svg></span>
        
      </div>
      <div class="header-cell">
        <span>Duration <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevrons-up-down"><path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/></svg></span>
       
      </div>
      <div class="header-cell">
        <span>Avg. User Sentiment <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevrons-up-down"><path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/></svg></span>
      </div>
      <div class="header-cell">Drop-off Sentiment</div>
      <div class="header-cell export-cell">
        <button class="export-btn">
          <img
            src="https://cdn.builder.io/api/v1/image/assets/TEMP/553bace96f1772107cd625db21cb31a3ea95701634e9ae9f7d9d77ad24cfbd45?placeholderIfAbsent=true&apiKey=43632c7bd1d84079a851d9b51a08f2e5"
            alt="Export"
            class="icon"
          />
          <span>Export CSV</span>
        </button>
      </div>
    </div>

    <div class="table-body">
      <div class="table-row" *ngFor="let conversation of conversations">
        <div class="table-cell id-cell">{{ conversation.id }}</div>
        <div class="table-cell">
          <div class="badge" [style.border-color]="conversation.engagementLevel.color">
            <img [src]="conversation.engagementLevel.icon" alt="Engagement level" class="icon" />
            <span>{{ conversation.engagementLevel.level }}</span>
          </div>
        </div>
        <div class="table-cell">
          <div class="badge" [style.border-color]="conversation.topic.color">
            <img [src]="conversation.topic.icon" alt="Topic icon" class="icon" />
            <span>{{ conversation.topic.name }}</span>
          </div>
        </div>
        <div class="table-cell">
          <div class="metric">
            <img [src]="conversation.dialogTurns.icon" alt="Dialog turns" class="icon" />
            <span>{{ conversation.dialogTurns.count }}</span>
          </div>
        </div>
        <div class="table-cell">
          <div class="metric">
            <img [src]="conversation.duration.icon" alt="Duration" class="icon" />
            <span>{{ conversation.duration.minutes }} min</span>
          </div>
        </div>
        <div class="table-cell">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="blue" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-loader-circle"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg>
          <span class="sentiment-score">{{ conversation.avgUserSentiment.score }}</span>
          <div class="badge" [style.border-color]="conversation.avgUserSentiment.color">
            <img [src]="conversation.avgUserSentiment.icon" alt="Sentiment" class="icon" />
            <span>{{ conversation.avgUserSentiment.label }}</span>
          </div>
        </div>
        <div class="table-cell">
          <div class="badge" [style.border-color]="conversation.dropoffSentiment.color">
            <img [src]="conversation.dropoffSentiment.icon" alt="Dropoff sentiment" class="icon" />
            <span>{{ conversation.dropoffSentiment.label }}</span>
          </div>
        </div>
        <div class="table-cell action-cell">
          <button class="details-btn">
            <span>View Details</span>
            <img
              src="https://cdn.builder.io/api/v1/image/assets/TEMP/3263935affdd2733f957e2d8ed84e36c00fb218bbb11a4bfb836d4e6e01cafda?placeholderIfAbsent=true&apiKey=43632c7bd1d84079a851d9b51a08f2e5"
              alt="View details"
              class="icon"
            />
          </button>
        </div>
      </div>
    </div>
  </section>
</div>
